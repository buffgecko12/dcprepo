CREATE OR REPLACE FUNCTION $APP_NAME$Views.SP_DCPReviseContract(
    pContractId INTEGER,
    pRevisionDescription VARCHAR(500)
) 
RETURNS VOID AS $$
BEGIN
	-- Update revision notes
	UPDATE $APP_NAME$.Contract
	SET RevisionDescription = pRevisionDescription
	WHERE ContractId = pContractId
	AND RevisionDeadlineTS > CURRENT_TIMESTAMP -- Only update if revision deadline has not already passed
	;
END
$$ LANGUAGE 'plpgsql';
